<div class="u-s-p-b-60">
  <div class="section__content">
    <div class="dash">
      <div class="container">
        <div class="row">
          <!-- Sidebar would go here - assuming it's handled by parent layout -->
          <div class="col-lg-9 col-md-12">
            <div class="dash__box dash__box--shadow dash__box--radius dash__box--bg-white">
              <div class="dash__pad-2">
                <h1 class="dash__h1 u-s-m-b-14">Change Password</h1>
                <br>

                <div class="row">
                  <div class="col-lg-8">
                    <form
                      class="dash-edit-p"
                      [formGroup]="passwordForm"
                      (ngSubmit)="onSubmit()"
                      novalidate>

                      <!-- Current Password -->
                      <div class="gl-inline">
                        <div class="u-s-m-b-30">
                          <label class="gl-label" for="current-password">
                            CURRENT PASSWORD
                          </label>
                          <input
                            class="input-text input-text--primary-style"
                            [class.input-error]="isFieldInvalid('currentPassword')"
                            type="password"
                            id="current-password"
                            formControlName="currentPassword"
                            autocomplete="current-password">
                          <span
                            id="current-password-status"
                            class="validation-message"
                            [innerHTML]="currentPasswordStatus">
                          </span>
                        </div>
                      </div>

                      <!-- New Password -->
                      <div class="gl-inline">
                        <div class="u-s-m-b-30">
                          <label class="gl-label" for="new-password">
                            NEW PASSWORD
                          </label>
                          <input
                            class="input-text input-text--primary-style"
                            [class.input-error]="isFieldInvalid('newPassword')"
                            type="password"
                            id="new-password"
                            formControlName="newPassword"
                            autocomplete="new-password">

                          <!-- Password Strength Indicator -->
                          <div class="password-strength-container" *ngIf="passwordForm.get('newPassword')?.value">
                            <div class="password-strength-bar">
                              <div
                                class="password-strength-fill"
                                [style.width]="getStrengthWidth()"
                                [style.background-color]="getStrengthColor()">
                              </div>
                            </div>

                            <!-- Password Requirements -->
                            <div class="password-requirements">
                              <div class="requirement" [class.met]="passwordRequirements.minLength">
                                {{ passwordRequirements.minLength ? '✓' : '○' }} At least 8 characters
                              </div>
                              <div class="requirement" [class.met]="passwordRequirements.hasUppercase">
                                {{ passwordRequirements.hasUppercase ? '✓' : '○' }} At least one uppercase letter
                              </div>
                              <div class="requirement" [class.met]="passwordRequirements.hasLowercase">
                                {{ passwordRequirements.hasLowercase ? '✓' : '○' }} At least one lowercase letter
                              </div>
                              <div class="requirement" [class.met]="passwordRequirements.hasNumbers">
                                {{ passwordRequirements.hasNumbers ? '✓' : '○' }} At least one number
                              </div>
                              <div class="requirement" [class.met]="passwordRequirements.hasSpecialChar">
                                {{ passwordRequirements.hasSpecialChar ? '✓' : '○' }} At least one special character
                              </div>
                            </div>
                          </div>

                          <span
                            id="new-password-status"
                            class="validation-message"
                            [innerHTML]="newPasswordStatus">
                          </span>
                        </div>
                      </div>

                      <!-- Confirm Password -->
                      <div class="gl-inline">
                        <div class="u-s-m-b-30">
                          <label class="gl-label" for="confirm-new-password">
                            CONFIRM NEW PASSWORD
                          </label>
                          <input
                            class="input-text input-text--primary-style"
                            [class.input-error]="isFieldInvalid('confirmPassword')"
                            type="password"
                            id="confirm-new-password"
                            formControlName="confirmPassword"
                            autocomplete="new-password">
                          <span
                            id="confirm-password-status"
                            class="validation-message"
                            [innerHTML]="confirmPasswordStatus">
                          </span>
                        </div>
                      </div>

                      <!-- Submit Button -->
                      <button
                        class="btn btn--e-brand-b-2"
                        type="submit"
                        [disabled]="passwordForm.invalid || isSubmitting">
                        <span *ngIf="isSubmitting" class="loading-spinner"></span>
                        {{ isSubmitting ? 'SUBMITTING...' : 'SUBMIT' }}
                      </button>

                      <!-- Form Status -->
                      <div
                        id="form-status"
                        class="form-status"
                        [class.success]="formStatusType === 'success'"
                        [class.error]="formStatusType === 'error'"
                        [innerHTML]="formStatus">
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
